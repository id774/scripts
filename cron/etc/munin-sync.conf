########################################################################
# munin-sync.conf
#
#  This file is sourced by munin-sync.sh to define parameters for
#  synchronizing Munin data and logs between the source and target servers.
#
#  Rules:
#  - Blank lines are allowed.
#  - Lines starting with '#' are comments.
#  - This file must be POSIX sh compatible.
#  - Do not add a shebang; this file is sourced, not executed.
#
#  Variables:
#  - TARGET_USER        : User account on the target server for SSH connection.
#  - TARGET_HOST(S)     : Hostname(s) or IP address(es) of the target server(s). Prefer TARGET_HOSTS; TARGET_HOST is for backward compatibility.
#  - TARGET_DIR         : Directory on the target server for logs and Munin data.
#  - SOURCE_HOST        : Hostname of the source server.
#  - MUNIN_CACHE_DIR    : Base directory of locally generated Munin files.
#  - GROUP_NAME         : Group name used for organizing Munin files.
#  - SENDING            : Local directory for staging logs before syncing.
#  - RSYNC_OPTS         : Options passed to rsync for data transfer.
#  - LOG_DIR            : Local directory where logs are saved before transfer.
#  - MUNIN_DIR          : Local directory of Munin-generated data for SOURCE_HOST.
#
########################################################################

# The user account on the target server used for connecting via SSH.
TARGET_USER="munin"

# The hostname or IP address of the target server.
# Legacy single-target setting. Used only when TARGET_HOSTS is empty.
# For new setups use TARGET_HOSTS (it accepts one or multiple hosts).
TARGET_HOST=""

# Preferred setting. Space-separated list of monitoring targets.
# Use this for both single and multiple targets.
# Behavior:
# - If set and non-empty: send data/logs to all listed hosts.
# - If empty: falls back to TARGET_HOST (legacy behavior).
# - If only one host is listed: identical to legacy single-target behavior.
# - If the current host itself is listed: sync to that host is handled locally (no SSH).
#   (Self host detection compares $(hostname -s) with each target's short name)
# Examples:
#   TARGET_HOSTS="www.id774.net dev.id774.net"
#   TARGET_HOSTS="www.id774.net"
TARGET_HOSTS="wyvern harpuia"

# The directory on the target server where logs and Munin data will be stored.
TARGET_DIR="/home/share/received"

# The hostname of the source server (typically, the local server).
SOURCE_HOST="YOUR_HOST_NAME.id774.net"

# The base directory where Munin-generated files are stored locally.
MUNIN_CACHE_DIR="/var/cache/munin"

# The group name used by Munin for organizing files. Change if necessary.
GROUP_NAME="id774.net"

# The local directory where logs will be temporarily stored before syncing.
# It is recommended to use an absolute path.
SENDING="$HOME/sending"

# rsync options for data transfer.
# -a  : archive mode (recursive copy, preserving permissions, timestamps, etc.)
# -z  : compress data during transfer for efficiency.
# --delete : delete files on the remote server that no longer exist on the source.
RSYNC_OPTS="-az --delete"

# The directory where logs will be saved locally before being transferred.
LOG_DIR="$SENDING/$SOURCE_HOST"

# The local directory where Munin-generated data for the source host is stored.
MUNIN_DIR="$MUNIN_CACHE_DIR/www/$GROUP_NAME/$SOURCE_HOST"
